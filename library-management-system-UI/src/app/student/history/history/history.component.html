<!-- <p>history works!</p>
<h2>Borrow History</h2>
<table border="1" cellpadding="8">
  <tr *ngFor="let r of history">
    <td>{{ r.book.title }}</td>
    <td>{{ r.status }}</td>
    <td>{{ r.requestedOn | date:'short' }}</td>
    <td *ngIf="r.approvedOn">âœ” {{ r.approvedOn | date:'short' }}</td>
    <td *ngIf="r.returnedOn">âœ” {{ r.returnedOn | date:'short' }}</td>
  </tr>
</table> -->
<!-- <section class="history-section">
  <h2 class="title">ðŸ“– Borrow History</h2>
  <div class="history-card" *ngFor="let r of history">
    <div class="book-detail">
      <h4>{{ r.book.title }}</h4>
      <p>Status: <strong>{{ r.status }}</strong></p>
    </div>
    <div class="dates">
      <p>ðŸ“… Requested: {{ r.requestedOn | date: 'short' }}</p>
      <p *ngIf="r.approvedOn">âœ… Approved: {{ r.approvedOn | date:'short' }}</p>
      <p *ngIf="r.returnedOn">ðŸ”„ Returned: {{ r.returnedOn | date:'short' }}</p>
    </div>
  </div>
</section> -->
<!-- <section class="container my-4">
  <h2 class="mb-4">ðŸ“– Borrow History</h2>

  <div class="card mb-3" *ngFor="let r of history">
    <div class="card-body row">
      <div class="col-md-6">
        <h5 class="card-title">{{ r.book.title }}</h5>
        <p class="card-text">
          Status: <strong>{{ r.status }}</strong>
        </p>
      </div>
      <div class="col-md-6">
        <p class="card-text mb-1">ðŸ“… Requested: {{ r.requestedOn | date: 'short' }}</p>
        <p *ngIf="r.approvedOn" class="card-text mb-1">âœ… Approved: {{ r.approvedOn | date: 'short' }}</p>
        <p *ngIf="r.returnedOn" class="card-text">ðŸ”„ Returned: {{ r.returnedOn | date: 'short' }}</p>
      </div>
    </div>
  </div>
</section> -->
<h2>ðŸ“š Borrow History</h2>

<table border="1" cellpadding="8">
  <thead>
    <tr>
      <th>Title</th>
      <th>Status</th>
      <th>Requested On</th>
      <th>Approved On</th>
      <th>Returned On</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let r of history">
      <td>{{ r.book?.title }}</td>
      <td>{{ getStatusLabel(r.status) }}</td>
      <td>{{ r.requestedOn | date:'short' }}</td>
      <td>{{ r.approvedOn ? (r.approvedOn | date:'short') : '-' }}</td>
      <td>{{ r.returnedOn ? (r.returnedOn | date:'short') : '-' }}</td>
    </tr>
  </tbody>
</table>
